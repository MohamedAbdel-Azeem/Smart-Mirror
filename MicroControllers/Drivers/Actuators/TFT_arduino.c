#include <stdio.h>
#include "pico/stdlib.h"
#include <string.h>
#include "TFT_arduino.h"


uint LCD_WR;
uint LCD_RS;
uint LCD_CS;
uint LCD_REST;
uint LCD_D0;
uint LCD_D1;
uint LCD_D2;
uint LCD_D3;
uint LCD_D4;
uint LCD_D5;
uint LCD_D6;
uint LCD_D7;

void set_pins(int tft) {
    if (tft == 1) {
        LCD_WR = 26;
        LCD_RS = 27;
        LCD_CS = 12;
        LCD_REST = 21;
        LCD_D0 = 2;
        LCD_D1 = 3;
        LCD_D2 = 4;
        LCD_D3 = 5;
        LCD_D4 = 6;
        LCD_D5 = 7;
        LCD_D6 = 8;
        LCD_D7 = 9;
    } else if (tft == 2) {
        LCD_WR = 18;
        LCD_RS = 19;
        LCD_CS = 28;
        LCD_REST = 20;
        LCD_D0 = 10;
        LCD_D1 = 11;
        LCD_D2 = 12;
        LCD_D3 = 13;
        LCD_D4 = 14;
        LCD_D5 = 15;
        LCD_D6 = 16;
        LCD_D7 = 17;
    }
}

const unsigned char font5x7[128][5] = {
    // ASCII 32: Space
    {0x00, 0x00, 0x00, 0x00, 0x00}, // ' '

    // ASCII 33: Exclamation Mark (!)
    {0x00, 0x00, 0x5F, 0x00, 0x00}, // '!'

    // ASCII 34: Double Quote (")
    {0x00, 0x03, 0x00, 0x03, 0x00}, // '"'

    // ASCII 35: Hash (#)
    {0x14, 0x7F, 0x14, 0x7F, 0x14}, // '#'

    // ASCII 36: Dollar Sign ($)
    {0x24, 0x2A, 0x7F, 0x2A, 0x12}, // '$'

    // ASCII 37: Percent (%)
    {0x23, 0x13, 0x08, 0x64, 0x62}, // '%'

    // ASCII 38: Ampersand (&)
    {0x36, 0x49, 0x55, 0x22, 0x50}, // '&'

    // ASCII 39: Single Quote (')
    {0x00, 0x05, 0x03, 0x00, 0x00}, // '''

    // ASCII 40: Left Parenthesis (()
    {0x00, 0x1C, 0x22, 0x41, 0x00}, // '('

    // ASCII 41: Right Parenthesis ())
    {0x00, 0x41, 0x22, 0x1C, 0x00}, // ')'

    // ASCII 42: Asterisk (*)
    {0x14, 0x08, 0x3E, 0x08, 0x14}, // '*'

    // ASCII 43: Plus (+)
    {0x08, 0x08, 0x3E, 0x08, 0x08}, // '+'

    // ASCII 44: Comma (,)
    {0x00, 0x50, 0x30, 0x00, 0x00}, // ','

    // ASCII 45: Dash (-)
    {0x08, 0x08, 0x08, 0x08, 0x08}, // '-'

    // ASCII 46: Period (.)
    {0x00, 0x60, 0x60, 0x00, 0x00}, // '.'

    // ASCII 47: Forward Slash (/)
    {0x20, 0x10, 0x08, 0x04, 0x02}, // '/'

    // ASCII 48-57: Digits (0–9)
    {0x3E, 0x51, 0x49, 0x45, 0x3E}, // '0'
    {0x00, 0x42, 0x7F, 0x40, 0x00}, // '1'
    {0x62, 0x51, 0x49, 0x49, 0x46}, // '2'
    {0x22, 0x49, 0x49, 0x49, 0x36}, // '3'
    {0x18, 0x14, 0x12, 0x7F, 0x10}, // '4'
    {0x27, 0x45, 0x45, 0x45, 0x39}, // '5'
    {0x3E, 0x49, 0x49, 0x49, 0x30}, // '6'
    {0x01, 0x71, 0x09, 0x05, 0x03}, // '7'
    {0x36, 0x49, 0x49, 0x49, 0x36}, // '8'
    {0x06, 0x49, 0x49, 0x49, 0x3E}, // '9'

    // ASCII 58-64: Special Symbols (:, ;, <, =, >, ?, @)
    {0x00, 0x36, 0x36, 0x00, 0x00}, // ':'
    {0x00, 0x56, 0x36, 0x00, 0x00}, // ';'
    {0x08, 0x14, 0x22, 0x41, 0x00}, // '<'
    {0x14, 0x14, 0x14, 0x14, 0x14}, // '='
    {0x41, 0x22, 0x14, 0x08, 0x00}, // '>'
    {0x02, 0x01, 0x59, 0x09, 0x06}, // '?'
    {0x3E, 0x41, 0x5D, 0x55, 0x1E}, // '@'

    // ASCII 65–90: Uppercase Letters ('A'–'Z')
    {0x7C, 0x12, 0x11, 0x12, 0x7C}, // 'A'
    {0x7F, 0x49, 0x49, 0x49, 0x36}, // 'B'
    {0x3E, 0x41, 0x41, 0x41, 0x22}, // 'C'
    {0x7F, 0x41, 0x41, 0x22, 0x1C}, // 'D'
    {0x7F, 0x49, 0x49, 0x49, 0x41}, // 'E'
    {0x7F, 0x09, 0x09, 0x09, 0x01}, // 'F'
    {0x3E, 0x41, 0x49, 0x49, 0x7A}, // 'G'
    {0x7F, 0x08, 0x08, 0x08, 0x7F}, // 'H'
        // ASCII 73–90: Uppercase Letters (continuation)
    {0x00, 0x41, 0x7F, 0x41, 0x00}, // 'I'
    {0x20, 0x40, 0x41, 0x3F, 0x01}, // 'J'
    {0x7F, 0x08, 0x14, 0x22, 0x41}, // 'K'
    {0x7F, 0x40, 0x40, 0x40, 0x40}, // 'L'
    {0x7F, 0x02, 0x0C, 0x02, 0x7F}, // 'M'
    {0x7F, 0x04, 0x08, 0x10, 0x7F}, // 'N'
    {0x3E, 0x41, 0x41, 0x41, 0x3E}, // 'O'
    {0x7F, 0x09, 0x09, 0x09, 0x06}, // 'P'
    {0x3E, 0x41, 0x51, 0x21, 0x5E}, // 'Q'
    {0x7F, 0x09, 0x19, 0x29, 0x46}, // 'R'
    {0x46, 0x49, 0x49, 0x49, 0x31}, // 'S'
    {0x01, 0x01, 0x7F, 0x01, 0x01}, // 'T'
    {0x3F, 0x40, 0x40, 0x40, 0x3F}, // 'U'
    {0x1F, 0x20, 0x40, 0x20, 0x1F}, // 'V'
    {0x3F, 0x40, 0x38, 0x40, 0x3F}, // 'W'
    {0x63, 0x14, 0x08, 0x14, 0x63}, // 'X'
    {0x03, 0x04, 0x78, 0x04, 0x03}, // 'Y'
    {0x61, 0x51, 0x49, 0x45, 0x43}, // 'Z'

    // ASCII 91–96: Special symbols ([, \, ], ^, _, `)
    {0x00, 0x7F, 0x41, 0x41, 0x00}, // '['
    {0x02, 0x04, 0x08, 0x10, 0x20}, // '\'
    {0x00, 0x41, 0x41, 0x7F, 0x00}, // ']'
    {0x04, 0x02, 0x01, 0x02, 0x04}, // '^'
    {0x80, 0x80, 0x80, 0x80, 0x80}, // '_'
    {0x00, 0x03, 0x05, 0x00, 0x00}, // '`'

    // ASCII 97–122: Lowercase Letters ('a'–'z')
    {0x20, 0x54, 0x54, 0x54, 0x78}, // 'a'
    {0x7F, 0x48, 0x44, 0x44, 0x38}, // 'b'
    {0x38, 0x44, 0x44, 0x44, 0x20}, // 'c'
    {0x38, 0x44, 0x44, 0x48, 0x7F}, // 'd'
    {0x38, 0x54, 0x54, 0x54, 0x18}, // 'e'
    {0x08, 0x7E, 0x09, 0x01, 0x02}, // 'f'
    {0x0C, 0x52, 0x52, 0x52, 0x3E}, // 'g'
    {0x7F, 0x08, 0x04, 0x04, 0x78}, // 'h'
    {0x00, 0x44, 0x7D, 0x40, 0x00}, // 'i'
    {0x20, 0x40, 0x44, 0x3D, 0x00}, // 'j'
    {0x7F, 0x10, 0x28, 0x44, 0x00}, // 'k'
    {0x00, 0x41, 0x7F, 0x40, 0x00}, // 'l'
    {0x7C, 0x04, 0x18, 0x04, 0x78}, // 'm'
    {0x7C, 0x08, 0x04, 0x04, 0x78}, // 'n'
    {0x38, 0x44, 0x44, 0x44, 0x38}, // 'o'
    {0x7C, 0x14, 0x14, 0x14, 0x08}, // 'p'
    {0x08, 0x14, 0x14, 0x18, 0x7C}, // 'q'
    {0x7C, 0x08, 0x04, 0x04, 0x08}, // 'r'
    {0x48, 0x54, 0x54, 0x54, 0x20}, // 's'
    {0x04, 0x3F, 0x44, 0x40, 0x20}, // 't'
    {0x3C, 0x40, 0x40, 0x40, 0x7C}, // 'u'
    {0x1C, 0x20, 0x40, 0x20, 0x1C}, // 'v'
    {0x3C, 0x40, 0x30, 0x40, 0x3C}, // 'w'
    {0x44, 0x28, 0x10, 0x28, 0x44}, // 'x'
    {0x0C, 0x50, 0x50, 0x50, 0x3C}, // 'y'
    {0x44, 0x64, 0x54, 0x4C, 0x44}, // 'z'

    // ASCII 123–127: Remaining symbols ({, |, }, ~, DEL)
    {0x08, 0x36, 0x41, 0x41, 0x00}, // '{'
    {0x00, 0x00, 0x7F, 0x00, 0x00}, // '|'
    {0x00, 0x41, 0x41, 0x36, 0x08}, // '}'
    {0x02, 0x01, 0x02, 0x04, 0x02}, // '~'
    {0x00, 0x00, 0x00, 0x00, 0x00}, // [DEL]
};

const unsigned char font10x12[][12] = {
    // ASCII 32: Space ' '
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}, 

    // ASCII 33: Exclamation Mark '!'
    {0x00, 0x00, 0x18, 0x18, 0x18, 0x18, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00},

    // ASCII 34: Double Quote '"'
    {0x00, 0x36, 0x36, 0x36, 0x12, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 35: Hash '#'
    {0x00, 0x00, 0x12, 0x12, 0x7F, 0x24, 0x24, 0xFE, 0x48, 0x48, 0x00, 0x00},

    // ASCII 36: Dollar Sign '$'
    {0x08, 0x3E, 0x49, 0x48, 0x3E, 0x09, 0x49, 0x49, 0x3E, 0x08, 0x08, 0x00},

    // ASCII 37: Percent '%'
    {0x00, 0x00, 0x66, 0x66, 0x0C, 0x18, 0x30, 0x66, 0x66, 0x00, 0x00, 0x00},

    // ASCII 38: Ampersand '&'
    {0x00, 0x30, 0x48, 0x48, 0x30, 0x52, 0x8A, 0x84, 0x7A, 0x00, 0x00, 0x00},

    // ASCII 39: Single Quote "'"
    {0x00, 0x18, 0x18, 0x18, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 40: Open Parenthesis '('
    {0x00, 0x04, 0x08, 0x10, 0x10, 0x10, 0x10, 0x08, 0x04, 0x00, 0x00, 0x00},

    // ASCII 41: Close Parenthesis ')'
    {0x00, 0x20, 0x10, 0x08, 0x08, 0x08, 0x08, 0x10, 0x20, 0x00, 0x00, 0x00},

    // ASCII 42: Asterisk '*'
    {0x00, 0x00, 0x00, 0x12, 0x3C, 0x7E, 0x3C, 0x12, 0x00, 0x00, 0x00, 0x00},

    // ASCII 43: Plus '+'
    {0x00, 0x00, 0x00, 0x10, 0x10, 0x7F, 0x10, 0x10, 0x00, 0x00, 0x00, 0x00},

    // ASCII 44: Comma ','
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x08, 0x10, 0x00},

    // ASCII 45: Hyphen '-'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 46: Period '.'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00},

    // ASCII 47: Slash '/'
    {0x00, 0x00, 0x02, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x40, 0x00, 0x00, 0x00},

    // ASCII 48: Digit '0'
    {0x00, 0x3C, 0x66, 0x6E, 0x76, 0x76, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 49: Digit '1'
    {0x00, 0x0C, 0x1C, 0x3C, 0x0C, 0x0C, 0x0C, 0x0C, 0x7E, 0x00, 0x00, 0x00},

    // ASCII 50: Digit '2'
    {0x00, 0x3C, 0x66, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x7E, 0x00, 0x00, 0x00},

    // ASCII 51: Digit '3'
    {0x00, 0x3C, 0x66, 0x06, 0x1C, 0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 52: Digit '4'
    {0x00, 0x06, 0x0E, 0x16, 0x26, 0x46, 0x7F, 0x06, 0x06, 0x00, 0x00, 0x00},

    // ASCII 53: Digit '5'
    {0x00, 0x7E, 0x60, 0x7C, 0x06, 0x06, 0x06, 0x66, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 54: Digit '6'
    {0x00, 0x1C, 0x30, 0x60, 0x7C, 0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 55: Digit '7'
    {0x00, 0x7E, 0x06, 0x0C, 0x18, 0x30, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00},

    // ASCII 56: Digit '8'
    {0x00, 0x3C, 0x66, 0x66, 0x3C, 0x66, 0x66, 0x66, 0x3C, 0x00, 0x00, 0x00},

    // ASCII 57: Digit '9'
    {0x00, 0x3C, 0x66, 0x66, 0x3E, 0x06, 0x06, 0x0C, 0x38, 0x00, 0x00, 0x00},

// ASCII 58: Colon ':'
    {0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x00, 0x00, 0x00},

    // ASCII 59: Semicolon ';'
    {0x00, 0x00, 0x00, 0x00, 0x18, 0x18, 0x00, 0x18, 0x18, 0x10, 0x00, 0x00},

    // ASCII 60: Less Than '<'
    {0x00, 0x00, 0x00, 0x04, 0x08, 0x10, 0x20, 0x10, 0x08, 0x04, 0x00, 0x00},

    // ASCII 61: Equals '='
    {0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x7E, 0x00, 0x00, 0x00, 0x00},

    // ASCII 62: Greater Than '>'
    {0x00, 0x00, 0x00, 0x20, 0x10, 0x08, 0x04, 0x08, 0x10, 0x20, 0x00, 0x00},

    // ASCII 63: Question Mark '?'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x02, 0x04, 0x08, 0x00, 0x08, 0x00, 0x00},

    // ASCII 64: At '@'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x5A, 0x5A, 0x5A, 0x5C, 0x40, 0x3E, 0x00},
    
    // ASCII 65: Uppercase 'A'
    {0x00, 0x18, 0x18, 0x24, 0x24, 0x24, 0x42, 0x42, 0x7E, 0x42, 0x42, 0x00},
    
    // ASCII 66: Uppercase 'B'
    {0x00, 0x7C, 0x42, 0x42, 0x42, 0x7C, 0x42, 0x42, 0x42, 0x7C, 0x00, 0x00},

    // ASCII 67: Uppercase 'C'
    {0x00, 0x3C, 0x42, 0x40, 0x40, 0x40, 0x40, 0x42, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 68: Uppercase 'D'
    {0x00, 0x78, 0x44, 0x42, 0x42, 0x42, 0x42, 0x42, 0x44, 0x78, 0x00, 0x00},

    // ASCII 69: Uppercase 'E'
    {0x00, 0x7E, 0x40, 0x40, 0x40, 0x7C, 0x40, 0x40, 0x40, 0x7E, 0x00, 0x00},

    // ASCII 70: Uppercase 'F'
    {0x00, 0x7E, 0x40, 0x40, 0x40, 0x7C, 0x40, 0x40, 0x40, 0x40, 0x00, 0x00},

    // ASCII 71: Uppercase 'G'
    {0x00, 0x3C, 0x42, 0x40, 0x40, 0x4E, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 72: Uppercase 'H'
    {0x00, 0x42, 0x42, 0x42, 0x42, 0x7E, 0x42, 0x42, 0x42, 0x42, 0x00, 0x00},

    // ASCII 73: Uppercase 'I'
    {0x00, 0x3E, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x3E, 0x00, 0x00},

    // ASCII 74: Uppercase 'J'
    {0x00, 0x1E, 0x04, 0x04, 0x04, 0x04, 0x04, 0x44, 0x44, 0x38, 0x00, 0x00},

    // ASCII 75: Uppercase 'K'
    {0x00, 0x42, 0x44, 0x48, 0x50, 0x60, 0x50, 0x48, 0x44, 0x42, 0x00, 0x00},

    // ASCII 76: Uppercase 'L'
    {0x00, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x7E, 0x00, 0x00},

    // ASCII 77: Uppercase 'M'
    {0x00, 0x42, 0x66, 0x66, 0x5A, 0x5A, 0x42, 0x42, 0x42, 0x42, 0x00, 0x00},

    // ASCII 78: Uppercase 'N'
    {0x00, 0x42, 0x62, 0x62, 0x52, 0x52, 0x4A, 0x4A, 0x46, 0x42, 0x00, 0x00},

    // ASCII 79: Uppercase 'O'
    {0x00, 0x3C, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 80: Uppercase 'P'
    {0x00, 0x7C, 0x42, 0x42, 0x42, 0x7C, 0x40, 0x40, 0x40, 0x40, 0x00, 0x00},

    // ASCII 81: Uppercase 'Q'
    {0x00, 0x3C, 0x42, 0x42, 0x42, 0x42, 0x4A, 0x46, 0x3E, 0x00, 0x00, 0x00},

    // ASCII 82: Uppercase 'R'
    {0x00, 0x7C, 0x42, 0x42, 0x42, 0x7C, 0x50, 0x48, 0x44, 0x42, 0x00, 0x00},

    // ASCII 83: Uppercase 'S'
    {0x00, 0x3C, 0x42, 0x40, 0x40, 0x3C, 0x02, 0x02, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 84: Uppercase 'T'
    {0x00, 0x7F, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x00, 0x00},

    // ASCII 85: Uppercase 'U'
    {0x00, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 86: Uppercase 'V'
    {0x00, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x42, 0x24, 0x18, 0x00, 0x00},

    // ASCII 87: Uppercase 'W'
    {0x00, 0x42, 0x42, 0x42, 0x42, 0x5A, 0x5A, 0x66, 0x66, 0x42, 0x00, 0x00},

    // ASCII 88: Uppercase 'X'
    {0x00, 0x42, 0x42, 0x24, 0x24, 0x18, 0x18, 0x24, 0x42, 0x42, 0x00, 0x00},

    // ASCII 89: Uppercase 'Y'
    {0x00, 0x42, 0x42, 0x42, 0x24, 0x18, 0x18, 0x08, 0x08, 0x08, 0x00, 0x00},

    // ASCII 90: Uppercase 'Z'
    {0x00, 0x7E, 0x02, 0x04, 0x08, 0x10, 0x20, 0x40, 0x40, 0x7E, 0x00, 0x00},


    // ASCII 91: Opening Bracket '['
    {0x00, 0x1C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x10, 0x1C, 0x00, 0x00},

    // ASCII 92: Backslash '\'
    {0x00, 0x40, 0x20, 0x20, 0x10, 0x10, 0x08, 0x08, 0x04, 0x04, 0x00, 0x00},

    // ASCII 93: Closing Bracket ']'
    {0x00, 0x38, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x38, 0x00, 0x00},

    // ASCII 94: Caret '^'
    {0x00, 0x08, 0x14, 0x14, 0x22, 0x22, 0x41, 0x00, 0x00, 0x00, 0x00, 0x00},

    // ASCII 95: Underscore '_'
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x00, 0x00},

    // ASCII 96: Backtick '`'
    {0x00, 0x10, 0x08, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
        // ASCII 97: Lowercase 'a'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x02, 0x3E, 0x42, 0x42, 0x3E, 0x00, 0x00},

    // ASCII 98: Lowercase 'b'
    {0x00, 0x40, 0x40, 0x40, 0x5C, 0x62, 0x42, 0x42, 0x62, 0x5C, 0x00, 0x00},

    // ASCII 99: Lowercase 'c'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x40, 0x40, 0x40, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 100: Lowercase 'd'
    {0x00, 0x02, 0x02, 0x02, 0x3A, 0x46, 0x42, 0x42, 0x46, 0x3A, 0x00, 0x00},

    // ASCII 101: Lowercase 'e'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x7E, 0x40, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 102: Lowercase 'f'
    {0x00, 0x0C, 0x12, 0x10, 0x7C, 0x10, 0x10, 0x10, 0x10, 0x10, 0x00, 0x00},

    // ASCII 103: Lowercase 'g'
    {0x00, 0x00, 0x00, 0x3A, 0x46, 0x42, 0x42, 0x46, 0x3A, 0x02, 0x42, 0x3C},

    // ASCII 104: Lowercase 'h'
    {0x00, 0x40, 0x40, 0x40, 0x5C, 0x62, 0x42, 0x42, 0x42, 0x42, 0x00, 0x00},

    // ASCII 105: Lowercase 'i'
    {0x00, 0x08, 0x00, 0x38, 0x08, 0x08, 0x08, 0x08, 0x08, 0x3E, 0x00, 0x00},

    // ASCII 106: Lowercase 'j'
    {0x00, 0x04, 0x00, 0x1C, 0x04, 0x04, 0x04, 0x04, 0x44, 0x44, 0x38, 0x00},

    // ASCII 107: Lowercase 'k'
    {0x00, 0x40, 0x40, 0x40, 0x44, 0x48, 0x70, 0x48, 0x44, 0x42, 0x00, 0x00},

    // ASCII 108: Lowercase 'l'
    {0x00, 0x38, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x3E, 0x00, 0x00},

    // ASCII 109: Lowercase 'm'
    {0x00, 0x00, 0x00, 0x6C, 0x52, 0x52, 0x52, 0x52, 0x52, 0x52, 0x00, 0x00},

    // ASCII 110: Lowercase 'n'
    {0x00, 0x00, 0x00, 0x5C, 0x62, 0x42, 0x42, 0x42, 0x42, 0x42, 0x00, 0x00},

    // ASCII 111: Lowercase 'o'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x42, 0x42, 0x42, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 112: Lowercase 'p'
    {0x00, 0x00, 0x00, 0x5C, 0x62, 0x42, 0x42, 0x62, 0x5C, 0x40, 0x40, 0x40},

    // ASCII 113: Lowercase 'q'
    {0x00, 0x00, 0x00, 0x3A, 0x46, 0x42, 0x42, 0x46, 0x3A, 0x02, 0x02, 0x02},

    // ASCII 114: Lowercase 'r'
    {0x00, 0x00, 0x00, 0x5C, 0x62, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x00},

    // ASCII 115: Lowercase 's'
    {0x00, 0x00, 0x00, 0x3C, 0x42, 0x40, 0x3C, 0x02, 0x42, 0x3C, 0x00, 0x00},

    // ASCII 116: Lowercase 't'
    {0x00, 0x10, 0x10, 0x7C, 0x10, 0x10, 0x10, 0x10, 0x12, 0x0C, 0x00, 0x00},

    // ASCII 117: Lowercase 'u'
    {0x00, 0x00, 0x00, 0x42, 0x42, 0x42, 0x42, 0x42, 0x46, 0x3A, 0x00, 0x00},

    // ASCII 118: Lowercase 'v'
    {0x00, 0x00, 0x00, 0x42, 0x42, 0x42, 0x42, 0x42, 0x24, 0x18, 0x00, 0x00},

    // ASCII 119: Lowercase 'w'
    {0x00, 0x00, 0x00, 0x42, 0x42, 0x42, 0x52, 0x52, 0x2C, 0x24, 0x00, 0x00},

    // ASCII 120: Lowercase 'x'
    {0x00, 0x00, 0x00, 0x42, 0x24, 0x24, 0x18, 0x18, 0x24, 0x42, 0x00, 0x00},

    // ASCII 121: Lowercase 'y'
    {0x00, 0x00, 0x00, 0x42, 0x42, 0x42, 0x42, 0x46, 0x3A, 0x02, 0x42, 0x3C},

    // ASCII 122: Lowercase 'z'
    {0x00, 0x00, 0x00, 0x7E, 0x04, 0x08, 0x10, 0x20, 0x40, 0x7E, 0x00, 0x00},

    
    };



















 const unsigned char clockFace[10] = {
    0x3C, // 0011111100 - Top horizontal line of the clock (circle top)
    0x66, // 0110011000 - Left part of the circle
    0xC3, // 1100001110 - Upper-left curve of the circle
    0xC3, // 1100001110 - Lower-left curve of the circle
    0xC3, // 1100001110 - Lower-left curve of the circle
    0xC3, // 1100001110 - Upper-right curve of the circle
    0x66, // 0110011000 - Right part of the circle
    0x3C, // 0011111100 - Bottom horizontal line of the clock (circle bottom)
    0x66, // 0110011000 - Left hand (vertical)
    0x3C  // 0011111100 - Right hand (horizontal)
};



void Lcd_Writ_Bus(unsigned char d, int tft)
{
    set_pins(tft);
    gpio_put(LCD_D0, (d & 0x01));
    gpio_put(LCD_D1, (d & 0x02) >> 1);
    gpio_put(LCD_D2, (d & 0x04) >> 2);
    gpio_put(LCD_D3, (d & 0x08) >> 3);
    gpio_put(LCD_D4, (d & 0x10) >> 4);
    gpio_put(LCD_D5, (d & 0x20) >> 5);
    gpio_put(LCD_D6, (d & 0x40) >> 6);
    gpio_put(LCD_D7, (d & 0x80) >> 7);

    gpio_put(LCD_WR, 0);
    gpio_put(LCD_WR, 1);
}

void Lcd_Write_Com(unsigned char VH, int tft)  
{   
    set_pins(tft);

    gpio_put(LCD_RS, 0);
    Lcd_Writ_Bus(VH,tft);
}

void Lcd_Write_Data(unsigned char VH, int tft)
{
    set_pins(tft);

    gpio_put(LCD_RS, 1);
    Lcd_Writ_Bus(VH,tft);
}

void Lcd_Write_Com_Data(unsigned char com, unsigned char dat, int tft)
{
    set_pins(tft);

    Lcd_Write_Com(com,tft);
    Lcd_Write_Data(dat,tft);
}

void Address_set(unsigned int x1, unsigned int y1, unsigned int x2, unsigned int y2, int tft)
{
    set_pins(tft);

    Lcd_Write_Com(0x2a,tft);
    Lcd_Write_Data(x1 >> 8 ,tft);
    Lcd_Write_Data(x1,tft);
    Lcd_Write_Data(x2 >> 8, tft);
    Lcd_Write_Data(x2,tft);
    Lcd_Write_Com(0x2b,tft);
    Lcd_Write_Data(y1 >> 8,tft);
    Lcd_Write_Data(y1,tft);
    Lcd_Write_Data(y2 >> 8,tft);
    Lcd_Write_Data(y2,tft);
    Lcd_Write_Com(0x2c,tft); 							 
}

void Lcd_Init(int tft)
{
    printf("Initializing TFT\n");
    
    set_pins(tft);
    printf("pin d0 %d\n", LCD_D0);
    printf("pin d1 %d\n", LCD_D1);
    printf("pin d2 %d\n", LCD_D2);
    printf("pin d3 %d\n", LCD_D3);
    printf("pin d4 %d\n", LCD_D4);
    printf("pin d5 %d\n", LCD_D5);
    printf("pin d6 %d\n", LCD_D6);
    printf("pin d7 %d\n", LCD_D7);
    printf("pin wr %d\n", LCD_WR);
    printf("pin rs %d\n", LCD_RS);
    printf("pin rest %d\n", LCD_REST);
    gpio_put(LCD_REST, 1);
    sleep_ms(5); 
    gpio_put(LCD_REST, 0);
    sleep_ms(15);
    gpio_put(LCD_REST, 1);
    sleep_ms(15);

    gpio_put(LCD_CS, 1);
    gpio_put(LCD_WR, 1);
    gpio_put(LCD_CS, 0);  //CS

   Lcd_Write_Com(0xCB,tft);  
    Lcd_Write_Data(0x39,tft); 
    Lcd_Write_Data(0x2C,tft); 
    Lcd_Write_Data(0x00,tft); 
    Lcd_Write_Data(0x34,tft); 
    Lcd_Write_Data(0x02,tft); 

    Lcd_Write_Com(0xCF,tft);  
    Lcd_Write_Data(0x00,tft); 
    Lcd_Write_Data(0XC1,tft); 
    Lcd_Write_Data(0X30,tft); 

    Lcd_Write_Com(0xE8,tft);  
    Lcd_Write_Data(0x85,tft); 
    Lcd_Write_Data(0x00,tft); 
    Lcd_Write_Data(0x78,tft); 

    Lcd_Write_Com(0xEA,tft);  
    Lcd_Write_Data(0x00,tft); 
    Lcd_Write_Data(0x00,tft); 
 
    Lcd_Write_Com(0xED,tft);  
    Lcd_Write_Data(0x64,tft); 
    Lcd_Write_Data(0x03,tft); 
    Lcd_Write_Data(0X12,tft); 
    Lcd_Write_Data(0X81,tft); 

    Lcd_Write_Com(0xF7,tft);  
    Lcd_Write_Data(0x20,tft); 
  
    Lcd_Write_Com(0xC0,tft);    //Power control 
    Lcd_Write_Data(0x23,tft);   //VRH[5:0] 
 
    Lcd_Write_Com(0xC1,tft);    //Power control 
    Lcd_Write_Data(0x10,tft);   //SAP[2:0];BT[3:0] 

    Lcd_Write_Com(0xC5,tft);    //VCM control 
    Lcd_Write_Data(0x3e,tft);   //Contrast
    Lcd_Write_Data(0x28,tft); 
 
    Lcd_Write_Com(0xC7,tft);    //VCM control2 
    Lcd_Write_Data(0x86,tft);   //--
 
    Lcd_Write_Com(0x36,tft);    // Memory Access Control 
    Lcd_Write_Data(0x48,tft);   

    Lcd_Write_Com(0x3A,tft);    
    Lcd_Write_Data(0x55,tft); 

    Lcd_Write_Com(0xB1,tft);    
    Lcd_Write_Data(0x00,tft);  
    Lcd_Write_Data(0x18,tft); 
 
    Lcd_Write_Com(0xB6,tft);    // Display Function Control 
    Lcd_Write_Data(0x08,tft); 
    Lcd_Write_Data(0x82,tft);
    Lcd_Write_Data(0x27,tft);  

    Lcd_Write_Com(0x11,tft);    //Exit Sleep 
    sleep_ms(120); 
				
    Lcd_Write_Com(0x29,tft);    //Display on 
    Lcd_Write_Com(0x2c,tft); 
}

void H_line(unsigned int x, unsigned int y, unsigned int l, unsigned int c, int tft)                   
{	
    set_pins(tft);
    unsigned int i,j;
    Lcd_Write_Com(0x02c,tft); //write_memory_start
    gpio_put(LCD_RS, 1);
    gpio_put(LCD_CS, 0);
    l = l + x;
    Address_set(x, y, l, y,tft);
    j = l * 2;
    for(i = 1; i <= j; i++)
    {
        Lcd_Write_Data(c,tft);
    }
    gpio_put(LCD_CS, 1);   
}

int RGB(int r, int g, int b, int tft)
{
    set_pins(tft);

    return (r << 16) | (g << 8) | b;
}

void Lcd_Clear(unsigned int color, int tft) {
    set_pins(tft);

    Address_set(0, 0, 240, 320,tft); // Adjust dimensions to match your LCD
    for (int i = 0; i < 240 * 320; i++) {
        Lcd_Write_Data(color >> 8,tft);
        Lcd_Write_Data(color & 0xFF,tft);
    }
}


void TFT_init(int tft)
{
    set_pins(tft);

    // Initialize data pins
    gpio_init(LCD_D0); gpio_set_dir(LCD_D0, GPIO_OUT);
    gpio_init(LCD_D1); gpio_set_dir(LCD_D1, GPIO_OUT);
    gpio_init(LCD_D2); gpio_set_dir(LCD_D2, GPIO_OUT);
    gpio_init(LCD_D3); gpio_set_dir(LCD_D3, GPIO_OUT);
    gpio_init(LCD_D4); gpio_set_dir(LCD_D4, GPIO_OUT);
    gpio_init(LCD_D5); gpio_set_dir(LCD_D5, GPIO_OUT);
    gpio_init(LCD_D6); gpio_set_dir(LCD_D6, GPIO_OUT);
    gpio_init(LCD_D7); gpio_set_dir(LCD_D7, GPIO_OUT);

    // Initialize control pins
    gpio_init(LCD_WR); gpio_set_dir(LCD_WR, GPIO_OUT);
    gpio_init(LCD_RS); gpio_set_dir(LCD_RS, GPIO_OUT);
    gpio_init(LCD_CS); gpio_set_dir(LCD_CS, GPIO_OUT);
    gpio_init(LCD_REST); gpio_set_dir(LCD_REST, GPIO_OUT);

    // Set initial pin states
    gpio_put(LCD_WR, 1);
    gpio_put(LCD_RS, 1);
    gpio_put(LCD_CS, 1);
    gpio_put(LCD_REST, 1);

    Lcd_Init(tft);
}

void LCD_Draw_Char(unsigned int x, unsigned int y, char c, unsigned int color, float scale, int tft)
{
    set_pins(tft);

    for (int row = 11; row >= 0; row--) { // Loop through each row in reverse order (from last to first)
        unsigned short line = font10x12[c - 32][row]; // Fetch the font data for the character

        // Loop through each bit in the row, starting with the 10th bit (last bit)
        for (int col = 0; col <10; col++) { // Start with the 9th bit and work backwards
            if (line & (1 << col)) { // If the bit is set, draw the scaled pixel block
                for (int dx = 0; dx < scale; dx++) { // Horizontal scaling
                    for (int dy = 0; dy < scale; dy++) { // Vertical scaling
                        // Address swapping for the 180-degree rotation
                        Address_set(
                            x + (11 - row) * scale + dx, // Calculate x-coordinate for the rotated position
                            y + (9-col) * scale + dy,        // Original y-coordinate
                            x + (11 - row) * scale + dx, // Same x-coordinate for the rotated position
                            y + (9-col) * scale + dy ,// Original y-coordinate
                            tft         
                        );
                        Lcd_Write_Data(color >> 8,tft); // Send high byte
                        Lcd_Write_Data(color,tft);     // Send low byte
                    }
                }
            }
        }
    }
}




void LCD_Draw_String(unsigned int x, unsigned int y, const char *str, unsigned int color, float scale, int tft)
{
    set_pins(tft);

    unsigned int startY=y;
    x+=12*scale;
    while (*str) {
        
        // Calculate the length of the next word if the current character is a space
        if (*str == ' ') {

            unsigned int word_length = 0;
            const char *temp = str + 1;

            // Calculate the number of characters until the next space or end of string
            while (*temp && *temp != ' ') {
                word_length++;
                temp++;
            }

            // Check if the next word fits in the remaining screen space
            if (y + (word_length * (10 * scale + scale)) > (315)) { // If it doesn't fit
                x += 12 * scale;  // Move to the next line by increasing `x`
                y = startY;            // Reset `y` to the beginning of the line
            }
            else{
                          y += (7 * scale) ; // Adjust vertical spacing for landscape mode

            }
            

            // y += (2 * scale) ; // Adjust vertical spacing for landscape mode

        }

        else{
            LCD_Draw_Char(240-x, y, *str, color, scale, tft);
                    y += (7 * scale) ; // Adjust vertical spacing for landscape mode

        }

        // Move to the next position
        str++;
    }
}


void LCD_Draw_String_vertical(unsigned int x, unsigned int y, const char *str, unsigned int color, float scale, int tft)
{
    set_pins(tft);

    unsigned int startX = x;
    y += 12 * scale;
    while (*str) {

        // Calculate the length of the next word if the current character is a space
        if (*str == ' ') {

            unsigned int word_length = 0;
            const char *temp = str + 1;

            // Calculate the number of characters until the next space or end of string
            while (*temp && *temp != ' ') {
                word_length++;
                temp++;
            }

            // Check if the next word fits in the remaining screen space
            if (x + (word_length * (10 * scale + scale)) > (235)) { // If it doesn't fit
                y += 12 * scale;  // Move to the next line by increasing `y`
                x = startX;        // Reset `x` to the beginning of the line
            } 
            else {
                x += (7 * scale); // Adjust horizontal spacing for vertical mode
            }

        } 
        else {
            LCD_Draw_Char(320 - y, x, *str, color, scale, tft); // Swap x and y positions
            x += (7 * scale); // Adjust horizontal spacing for vertical mode
        }

        // Move to the next position
        str++;
    }
}



// void LCD_Draw_Vertical_String(unsigned int x, unsigned int y, const char *str, unsigned int color, float scale)
// {
//     unsigned int startX = x;
//     y += 12 * scale; // Adjust the initial vertical offset

//     while (*str) {

//         // Calculate the length of the next word if the current character is a space
//         if (*str == ' ') {

//             unsigned int word_length = 0;
//             const char *temp = str + 1;

//             // Calculate the number of characters until the next space or end of string
//             while (*temp && *temp != ' ') {
//                 word_length++;
//                 temp++;
//             }

//             // Check if the next word fits in the remaining screen space
//             if (x + (word_length * (10 * scale + scale)) > (315)) { // If it doesn't fit
//                 y += 12 * scale;  // Move to the next line by increasing `y`
//                 x = startX;        // Reset `x` to the beginning of the line
//             }
//             else {
//                 x += (7 * scale); // Adjust horizontal spacing for vertical mode
//             }

//         } else {
//             LCD_Draw_Char(240 - y, x, *str, color, scale); // Swap x and y positions
//             x += (7 * scale); // Adjust horizontal spacing for vertical mode
//         }

//         // Move to the next character
//         str++;
//     }
// }



// Function to update the display text
void UpdateDisplay(char* prev_str, char* new_str, unsigned int x, unsigned int y, uint16_t textColor, uint16_t bgColor,float scale, int tft) {
    set_pins(tft);

    // Erase the previous string by drawing it in the background color
    if (strlen(prev_str) > 0) {
        LCD_Draw_String(x, y, prev_str, bgColor, scale,tft);
    }

    // Draw the new string
    LCD_Draw_String(x, y, new_str, textColor, scale,tft);

    // Update the previous string buffer
    strcpy(prev_str, new_str);
}


// void UpdateDisplay(char* prev_str, char* new_str, unsigned int x, unsigned int y, uint16_t textColor, uint16_t bgColor, float scale, int tft) {
//     set_pins(tft);

//     unsigned int startY = y;

//     while (*new_str) {
//         // Compare the characters of the two strings
//         if (*prev_str != *new_str) {
//             // Erase the previous character if it exists
//             if (*prev_str) {
//                 LCD_Draw_Char(x, y, *prev_str, bgColor, scale, tft);
//             }

//             // Draw the new character
//             LCD_Draw_Char(x, y, *new_str, textColor, scale, tft);
//         }

//         // Increment the vertical position for the next character
//         y += (7 * scale);

//         // Move to the next characters
//         prev_str++;
//         new_str++;
//     }

//     // If the previous string is longer, erase the remaining characters
//     while (*prev_str) {
//         LCD_Draw_Char(240 - x, 320 - y, *prev_str, bgColor, scale, tft);
//         y += (7 * scale);
//         prev_str++;
//     }
// }


